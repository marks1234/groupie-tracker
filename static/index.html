<!DOCTYPE html>
<html>
<head>
    <title>Groupie Trackers</title>
    <link rel="stylesheet" type="text/css" href="global.css">
</head>
<body>

    <header class="main-header">
        <h1>Groupie Trackers</h1>
    </header>

    <main class="main-content">

        <div class="card-container" id="artists-container">
            <!-- Space for adding small cards -->
            <!-- <div class="card">
                <img src="https://groupietrackers.herokuapp.com/api/images/queen.jpeg" class="card-img" alt="Example Band">
                <div>
                    <h2 class="card-title">Queen</h2>
                    <p class="card-info">Year Started: 1970</p>
                    <p class="card-info">First Album: 1973</p>
                </div>
            </div> -->
            
        </div>

        <!-- Button that leads to a dynamic website -->
        <button class="fetch-button" onclick="fetchData()">Fetch More Data</button>

    </main>
    <script>
        async function fetchData(endpoint) {
            try {
                const response = await fetch(`http://localhost:8080${endpoint}`);
                const data = await response.text(); // Get the response body as text
                return JSON.parse(data); // Parse the text as JSON
            } catch (error) {
                console.error(`Error fetching ${endpoint}:`, error);
            }
        }
        
        async function loadArtists() {
        try {
            const artists = await fetchData('/artists');
            const artistsContainer = document.getElementById('artists-container');

            // Loop through the artists and display them
            artists.forEach(artist => {
                const artistDiv = document.createElement('div');
                artistDiv.className = 'artist-card';

                artistDiv.innerHTML = `
                    <img src="${artist.Image}" alt="${artist.Name}">
                    <h2>${artist.Name}</h2>
                    <p><strong>Year Started:</strong> ${artist.CreationDate}</p>
                    <p><strong>First Album:</strong> ${artist.FirstAlbum}</p>
                `;

                artistsContainer.appendChild(artistDiv);
            });
        } catch (error) {
            console.error('Error loading data:', error);
        }
    }

    loadArtists();
    </script>
</body>
</html>
